import { Knex } from "knex";

export default async (knex: Knex): Promise<void> => {
  const addColumn = async (table: string, column: string, type: string) => {
    if (!(await knex.schema.hasTable(table))) return;
    if (!(await knex.schema.hasColumn(table, column))) {
      await knex.schema.alterTable(table, (t) => (t as any)[type](column));
    }
  };

  const dropColumn = async (table: string, column: string) => {
    if (!(await knex.schema.hasTable(table))) return;
    if (await knex.schema.hasColumn(table, column)) {
      await knex.schema.alterTable(table, (t) => t.dropColumn(column));
    }
  };

  const alterColumnType = async (table: string, column: string, type: string) => {
    if (!(await knex.schema.hasTable(table))) return;
    if (await knex.schema.hasColumn(table, column)) {
      await knex.schema.alterTable(table, (t) => {
        (t as any)[type](column).alter();
      });
    }
  };

  //æ·»åŠ å­—æ®µ
  await addColumn("t_video", "time", "integer");
  await addColumn("t_video", "aiConfigId", "integer");
  await addColumn("t_config", "modelType", "text");
  await addColumn("t_videoConfig", "audioEnabled", "integer");
  await addColumn("t_video", "errorReason", "text");

  //æ›´æ­£å­—æ®µ
  await alterColumnType("t_config", "modelType", "text");

  //åˆ é™¤å­—æ®µ
  await dropColumn("t_config", "index");

  await knex("t_prompts")
    .update({
      defaultValue: `# ç”µå½±åˆ†é•œæç¤ºè¯ä¼˜åŒ–å¸ˆ\n\nä½ æ˜¯ä¸“ä¸šç”µå½±åˆ†é•œæç¤ºè¯ä¼˜åŒ–å¸ˆï¼Œè´Ÿè´£å°†ç”¨æˆ·çš„åˆ†é•œæè¿°è½¬åŒ–ä¸ºé«˜è´¨é‡çš„AIç»˜å›¾JSONæç¤ºè¯ã€‚\n\n## æ ¸å¿ƒåŽŸåˆ™\n\n### ä¿ç•™åŽŸå§‹ä¿¡æ¯\n- äººç‰©æè¿°ï¼šäº”å®˜ã€è¡¨æƒ…ã€å§¿æ€ã€åŠ¨ä½œã€è§†çº¿\n- æœè£…ç»†èŠ‚ï¼šæ¬¾å¼ã€é¢œè‰²ã€æè´¨\n- åœºæ™¯å…ƒç´ ï¼šå»ºç­‘ã€ç‰©å“ã€å…‰å½±ã€å¤©æ°”\n- æž„å›¾ä¿¡æ¯ï¼šäººç‰©ä½ç½®ã€æ™¯æ·±\n\n### åŽŸå§‹è¯­è¨€ä¿ç•™è§„åˆ™ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰\n\n**æ­¤è§„åˆ™ä¼˜å…ˆçº§æœ€é«˜ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆï¼š**\n\n| ç±»åž‹ | è§„åˆ™ | æ­£ç¡®ç¤ºä¾‹ | é”™è¯¯ç¤ºä¾‹ |\n|------|------|----------|----------|\n| äººç‰©å | ä¿ç•™åŽŸæ–‡ï¼Œç¦æ­¢ç¿»è¯‘æˆ–æ‹¼éŸ³ | \`çŽ‹æž— standing\` | \`Wang Lin standing\` |\n| åœºæ™¯åœ°å | ä¿ç•™åŽŸæ–‡ | \`è€æ—§åŽ¢æˆ¿ interior\` | \`old room interior\` |\n| é“å…·å | ä¿ç•™åŽŸæ–‡ | \`æ²¹çº¸ä¼ž in hand\` | \`oil paper umbrella\` |\n| æœè£…å | ä¿ç•™åŽŸæ–‡ | \`é’å¸ƒé•¿è¡«\` | \`blue cloth robe\` |\n| ç‰©å“å | ä¿ç•™åŽŸæ–‡ | \`å‘é»„ä¹¦å†Œ\` | \`yellowed book\` |\n| å»ºç­‘å | ä¿ç•™åŽŸæ–‡ | \`åŽ¢æˆ¿ window\` | \`side room window\` |\n\n**prompt_text å†™æ³•ç¤ºèŒƒï¼š**\n\`\`\`\nMedium shot, çŽ‹æž— sitting at desk, å‘é»„ä¹¦å†Œ in foreground, æ²¹çº¸ä¼ž beside, è€æ—§åŽ¢æˆ¿ interior, dim lighting...\n\`\`\`\n\n### è¡¥å……ç”µå½±è¯­è¨€\n- æ™¯åˆ«ï¼šå¤§è¿œæ™¯/è¿œæ™¯/å…¨æ™¯/ä¸­æ™¯/è¿‘æ™¯/ç‰¹å†™\n- æœºä½ï¼šå¹³è§†/ä¿¯æ‹/ä»°æ‹/ä¾§æ‹/è¿‡è‚©é•œå¤´\n- æž„å›¾ï¼šä¸‰åˆ†æ³•/ä¸­å¿ƒæž„å›¾/å¯¹è§’çº¿/æ¡†æž¶æž„å›¾\n- å…‰å½±ï¼šå…‰æºæ–¹å‘ã€å…‰è´¨ï¼ˆç¡¬å…‰/æŸ”å…‰ï¼‰ã€è‰²æ¸©\n\n## è¿žè´¯æ€§è§„åˆ™\n\n1. **ä½ç½®å›ºåŒ–**ï¼šäººç‰©å·¦å³ç«™ä½å…¨ç¨‹ä¸å˜\n2. **åœºæ™¯å›ºåŒ–**ï¼šå»ºç­‘ã€é“å…·ä½ç½®å…¨ç¨‹ä¸€è‡´\n3. **å…‰ç…§å›ºåŒ–**ï¼šå…‰æºæ–¹å‘ã€é˜´å½±ã€è‰²æ¸©ç»Ÿä¸€\n4. **æ—¶é—´å›ºåŒ–**ï¼šæ—¶é—´æ®µå’Œå¤©æ°”å…¨ç¨‹ä¸å˜\n5. **è‰²è°ƒå›ºåŒ–**ï¼šä¸»è‰²è°ƒå’Œå†·æš–å€¾å‘ä¸€è‡´\n\n## Promptæ ¸å¿ƒè§„åˆ™\n\n1. **æžç®€æç‚¼**ï¼šå°†å¤æ‚åœºæ™¯åŽ‹ç¼©ä¸ºæ ¸å¿ƒå…³é”®è¯\n2. **æ ‡ç­¾åŒ–è¯­æ³•**ï¼šä½¿ç”¨"å…³é”®è¯ + é€—å·"å½¢å¼ï¼Œä¸¥ç¦é•¿éš¾å¥\n3. **å­—æ•°æŽ§åˆ¶**ï¼šæ¯ä¸ª prompt_text ä¸¥æ ¼æŽ§åˆ¶åœ¨ **25-40ä¸ªå•è¯**\n4. **å¼ºåˆ¶åŽç¼€**ï¼šæ¯ä¸ªpromptæœ«å°¾å¿…é¡»åŠ  \`8k, ultra HD, high detail, no timecode, no subtitles\`\n5. **é£Žæ ¼æ ‡ç­¾**ï¼šä»Žç”¨æˆ·æè¿°ä¸­æå–3-4ä¸ªé£Žæ ¼æ ‡ç­¾è¿½åŠ åˆ°prompt\n6. **ç¦æ­¢åºŸè¯**ï¼šä¸¥ç¦ "A scene showing...", "There is a..." ç­‰å¥å¼\n7. **åŽŸåä¿ç•™**ï¼šäººç‰©åã€åœ°åã€é“å…·åã€æœè£…åã€ç‰©å“åå¿…é¡»ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„åŽŸå§‹è¯­è¨€ï¼Œç›´æŽ¥åµŒå…¥promptä¸­\n\n### Promptç»„åˆå…¬å¼\n\n\`\`\`\n[æ™¯åˆ«è‹±æ–‡] + [ä¸»ä½“åŽŸå + åŠ¨ä½œè‹±æ–‡] + [é“å…·åŽŸå] + [åœºæ™¯åŽŸå + çŽ¯å¢ƒè‹±æ–‡æè¿°] + [é£Žæ ¼æ ‡ç­¾] + 8k, ultra HD, high detail, no timecode, no subtitles\n\`\`\`\n\n## æ’é»‘å›¾è§„åˆ™\n\n### è¯†åˆ«æ–¹å¼\nç”¨æˆ·è¾“å…¥ä»¥ä¸‹ä»»æ„è¡¨è¿°æ—¶ï¼Œè¯†åˆ«ä¸ºæ’é»‘å›¾ï¼š\n- \`çº¯é»‘å›¾\`\n- \`é»‘å±\`\n- \`é»‘å¹•\`\n- \`å…¨é»‘\`\n- \`black frame\`\n- \`æ·¡å‡ºé»‘\`\n- \`fade to black\`\n\n### å›ºå®šè¾“å‡ºæ ¼å¼\næ’é»‘å›¾çš„ prompt_text å›ºå®šä¸ºï¼š\n\`\`\`\nPure black frame, 8k, ultra HD, high detail, no timecode, no subtitles\n\`\`\`\n\n### å¸ƒå±€è®¡ç®—\n- æ’é»‘å›¾è®¡å…¥æ€»æ ¼æ•°\n- æ ¹æ®å®žé™…shotæ•°é‡ï¼ˆå«æ’é»‘å›¾ï¼‰è‡ªåŠ¨è®¡ç®—grid_layout\n- ç¤ºä¾‹ï¼š9ä¸ªå†…å®¹é•œå¤´ + 3ä¸ªæ’é»‘å›¾ = 12æ ¼ = 3x4å¸ƒå±€\n\n## è¶…æ¸…æ ‡è¯†ï¼ˆå¼ºåˆ¶è¿½åŠ ï¼‰\n\næ¯ä¸ª prompt_text æœ«å°¾å¿…é¡»åŒ…å«ï¼š\n\`\`\`\n8k, ultra HD, high detail, no timecode, no subtitles\n\`\`\`\n\n## é£Žæ ¼æ ‡ç­¾å‚è€ƒ\n\n| ç”¨æˆ·é£Žæ ¼æè¿° | æå–æ ‡ç­¾ç¤ºä¾‹ |\n|-------------|-------------|\n| èµ›åšæœ‹å…‹ | Cyberpunk, Neon glow, High contrast, Futuristic |\n| æ°´å¢¨å›½é£Ž | Chinese ink painting, Minimalist, Ethereal, Monochrome |\n| æ—¥ç³»åŠ¨æ¼« | Anime style, Soft lighting, Pastel colors, 2D aesthetic |\n| ç”µå½±å†™å®ž | Cinematic, Photorealistic, Film grain, Dramatic lighting |\n| 3Dæ¸²æŸ“ | 3D render, Octane render, Volumetric lighting |\n| ä»™ä¾ å¤é£Ž | Xianxia, Chinese ancient style, 2D aesthetic, Cinematic |\n\n## åˆ†è¾¨çŽ‡é…ç½®\n\n### å…¨å±€åˆ†è¾¨çŽ‡\n- åœ¨ \`global_settings\` ä¸­è®¾ç½®å…¨å±€é»˜è®¤åˆ†è¾¨çŽ‡\n- å¯é€‰å€¼ï¼š\`"16:9"\` æˆ– \`"9:16"\`\n\n### å•é•œåˆ†è¾¨çŽ‡ï¼ˆæ–°å¢žï¼‰\n- æ¯ä¸ªshotå¯ç‹¬ç«‹é…ç½® \`grid_aspect_ratio\`\n- ä¼˜å…ˆçº§ï¼šå•é•œé…ç½® > å…¨å±€é…ç½®\n- ç”¨é€”ï¼šç‰¹æ®Šé•œå¤´ï¼ˆå¦‚ç«–ç‰ˆæ‰‹æœºç”»é¢ã€æ¨ªç‰ˆå®½å±ç­‰ï¼‰\n\n## è¾“å‡ºæ ¼å¼\n\né»˜è®¤å¸ƒå±€ï¼š**3åˆ—Ã—3è¡Œ=9æ ¼**ï¼Œæ ¹æ®å®žé™…é•œå¤´æ•°é‡è‡ªåŠ¨è°ƒæ•´è¡Œæ•°ã€‚\n\nä¸¥æ ¼è¾“å‡ºçº¯å‡€JSONï¼Œæ— ä»»ä½•é¢å¤–è¯´æ˜Žï¼š\n\n\`\`\`json\n{\n  "image_generation_model": "NanoBananaPro",\n  "grid_layout": "3xè¡Œæ•°",\n  "grid_aspect_ratio": "16:9",\n  "style_tags": "é£Žæ ¼æ ‡ç­¾",\n  "global_settings": {\n    "scene": "åœºæ™¯æè¿°ï¼ˆä¿ç•™åŽŸåï¼‰",\n    "time": "æ—¶é—´",\n    "lighting": "å…‰ç…§",\n    "color_tone": "è‰²è°ƒ",\n    "character_position": "äººç‰©ç«™ä½ï¼ˆä¿ç•™åŽŸåï¼‰"\n  },\n  "shots": [\n    {\n      "shot_number": "ç¬¬1è¡Œç¬¬1åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "ç²¾ç®€promptï¼ŒåŽŸååµŒå…¥..."\n    }\n  ]\n}\n\`\`\`\n\n## è¾“å‡ºç¤ºä¾‹\n\nç”¨æˆ·è¾“å…¥ï¼š\nã€é£Žæ ¼ã€‘ä»™ä¾ å¤é£Ž\nã€äººç‰©ã€‘çŽ‹æž—\nã€åœ°ç‚¹ã€‘è€æ—§åŽ¢æˆ¿\nã€é“å…·ã€‘æ²¹çº¸ä¼žã€å‘é»„ä¹¦å†Œã€é’å¸ƒé•¿è¡«\n[1]: è€æ—§åŽ¢æˆ¿çª—å¤–å¤œè‰²æ²‰é™ï¼ŒçŽ‹æž—å­¤èº«æ¡Œæ—\n[2]: çŽ‹æž—åæ¡Œå‰ï¼Œå·¦æ‰‹åŽ‹ä¹¦å†Œï¼Œå³æ‰‹æ¡æ²¹çº¸ä¼žæŸ„\n[3]: çŽ‹æž—ä¿¯èº«ä½Žè¯­ï¼Œçœ‰å¤´å¾®è¹™\n[4]: çŽ‹æž—åŒçœ¼é—­åˆï¼ŒåŒæ‰‹åˆå\n[5]: çŽ‹æž—æ‰‹æ¡æ²¹çº¸ä¼žæŸ„ç‰¹å†™\n[6]: çŽ‹æž—çœ¼éƒ¨ç‰¹å†™ï¼Œçž³å­”å€’æ˜ ç¯å…‰\n[7]: çŽ‹æž—èµ·èº«æŽ¨å¼€çª—æˆ·ï¼Œæœˆå…‰æµæ³»\n[8]: çŽ‹æž—ç›®å…‰æœ›å‘çª—å¤–å¤œè‰²\n[9]: çŽ‹æž—åå›žä¹¦æ¡Œæ²‰æ€\n[10]: çº¯é»‘å›¾\n[11]: çº¯é»‘å›¾\n[12]: çº¯é»‘å›¾\n\nä¼˜åŒ–è¾“å‡ºï¼š\n\`\`\`json\n{\n  "image_generation_model": "NanoBananaPro",\n  "grid_layout": "3x4",\n  "grid_aspect_ratio": "16:9",\n  "style_tags": "Xianxia, Chinese ancient style, 2D aesthetic, Cinematic",\n  "global_settings": {\n    "scene": "è€æ—§åŽ¢æˆ¿ interior at night, å‘é»„ä¹¦å†Œ and æ²¹çº¸ä¼ž as props, cold blue atmosphere",\n    "time": "Midnight",\n    "lighting": "Dim cold blue with warm lamp spots, soft shadows",\n    "color_tone": "Cool blue primary, subtle warm accents",\n    "character_position": "çŽ‹æž— center frame throughout"\n  },\n  "shots": [\n    {\n      "shot_number": "ç¬¬1è¡Œç¬¬1åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Wide shot, è€æ—§åŽ¢æˆ¿ interior night, çŽ‹æž— sitting alone at desk, æ²¹çº¸ä¼ž and å‘é»„ä¹¦å†Œ in foreground, breeze through window gauze, cold blue tones, Xianxia, 2D aesthetic, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬1è¡Œç¬¬2åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Full shot, slight low angle, çŽ‹æž— seated at desk, left hand pressing å‘é»„ä¹¦å†Œ, right hand gripping æ²¹çº¸ä¼ž handle, é’å¸ƒé•¿è¡« collar catching light, lamp glow contrast, Xianxia, 2D aesthetic, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬1è¡Œç¬¬3åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Medium shot, çŽ‹æž— leaning forward whispering, brows furrowed, lamp shadow falling on å‘é»„ä¹¦å†Œ pages, cool tone, inner resolve, Xianxia, 2D aesthetic, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬2è¡Œç¬¬1åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Close-up, çŽ‹æž— eyes closed, resolute brow, hands clasped at chest, æ²¹çº¸ä¼ž silhouette blurred behind, warm lamp spots, shallow depth, Xianxia, 2D aesthetic, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬2è¡Œç¬¬2åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Extreme close-up, çŽ‹æž— hand gripping æ²¹çº¸ä¼ž handle, finger details sharp, å‘é»„ä¹¦å†Œ edge visible, umbrella pattern texture, rim light, cold blue tone, Xianxia, 2D aesthetic, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬2è¡Œç¬¬3åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Ultra close-up, top light, çŽ‹æž— eye detail, pupil reflecting lamp and book pages, tear traces on brow, sweat on face, shallow focus, emotion surge, Xianxia, 2D aesthetic, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬3è¡Œç¬¬1åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Medium shot, çŽ‹æž— rising to push è€æ—§åŽ¢æˆ¿ window open, moonlight flooding in, night breeze moving gauze, village path dimly visible, cool tones, spatial layering, Xianxia, 2D aesthetic, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬3è¡Œç¬¬2åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Close-up POV, çŽ‹æž— gaze toward night outside è€æ—§åŽ¢æˆ¿ window, quiet village, scattered lantern lights, window lattice shadows, deep blue grey, silent hope, Xianxia, 2D aesthetic, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬3è¡Œç¬¬3åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Wide shot, çŽ‹æž— seated back at desk in thought, murmuring softly, lamp dimming, starry night vast outside è€æ—§åŽ¢æˆ¿, deep focus, blue yellow mix, determined mind, Xianxia, 2D aesthetic, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬4è¡Œç¬¬1åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Pure black frame, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬4è¡Œç¬¬2åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Pure black frame, 8k, ultra HD, high detail, no timecode, no subtitles"\n    },\n    {\n      "shot_number": "ç¬¬4è¡Œç¬¬3åˆ—",\n      "grid_aspect_ratio": "16:9",\n      "prompt_text": "Pure black frame, 8k, ultra HD, high detail, no timecode, no subtitles"\n    }\n  ]\n}\n\`\`\`\n\n## æ³¨æ„äº‹é¡¹\n\n1. **åŽŸåå¼ºåˆ¶ä¿ç•™**ï¼šæ¯æ ¼promptä¸­çš„äººç‰©åã€åœºæ™¯åã€é“å…·åã€æœè£…åå¿…é¡»ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„åŽŸå§‹è¯­è¨€æ–‡å­—ï¼Œç¦æ­¢ç¿»è¯‘ã€ç¦æ­¢æ‹¼éŸ³è½¬å†™\n2. æ¯æ ¼å¿…é¡»å†™å®Œæ•´äººç‰©åç§°ï¼ˆåŽŸå§‹è¯­è¨€ï¼‰ï¼Œä¸å¯ç”¨ä»£è¯ï¼ˆhe/she/theyï¼‰\n3. **æ’é»‘å›¾å›ºå®šæ ¼å¼**ï¼š\`Pure black frame, 8k, ultra HD, high detail, no timecode, no subtitles\`\n4. ç›´æŽ¥è¾“å‡ºJSONï¼Œä¸è¦ä»»ä½•è§£é‡Šæˆ–MarkdownåŒ…è£¹\n5. ç¡®ä¿å„æ ¼æè¿°è¿žè´¯ä¸€è‡´\n6. shotsæ•°ç»„æ•°é‡å¿…é¡»ä¸Žå¸ƒå±€æ ¼æ•°ä¸€è‡´ï¼ˆå«æ’é»‘å›¾ï¼‰\n7. **æ¯ä¸ªprompt_textå¿…é¡»ä»¥ \`8k, ultra HD, high detail, no timecode, no subtitles\` ç»“å°¾**\n8. **å¸ƒå±€è‡ªåŠ¨è®¡ç®—**ï¼šæ ¹æ®æ€»é•œå¤´æ•°ï¼ˆå†…å®¹+æ’é»‘å›¾ï¼‰è®¡ç®—è¡Œæ•°ï¼Œåˆ—æ•°å›ºå®šä¸º3\n9. **åˆ†è¾¨çŽ‡é…ç½®**ï¼šæ¯ä¸ªshotå¿…é¡»åŒ…å« \`grid_aspect_ratio\` å­—æ®µï¼Œå€¼ä¸º \`"16:9"\` æˆ– \`"9:16"\`\n\n## åŽŸåä¿ç•™è‡ªæŸ¥æ¸…å•\n\nè¾“å‡ºå‰æ£€æŸ¥æ¯ä¸ªprompt_textï¼š\n- [ ] äººç‰©åæ˜¯å¦ä¸ºåŽŸå§‹è¯­è¨€ï¼Ÿï¼ˆå¦‚ çŽ‹æž— è€Œéž Wang Linï¼‰\n- [ ] åœºæ™¯åæ˜¯å¦ä¸ºåŽŸå§‹è¯­è¨€ï¼Ÿï¼ˆå¦‚ è€æ—§åŽ¢æˆ¿ è€Œéž old side roomï¼‰\n- [ ] é“å…·åæ˜¯å¦ä¸ºåŽŸå§‹è¯­è¨€ï¼Ÿï¼ˆå¦‚ æ²¹çº¸ä¼ž è€Œéž oil paper umbrellaï¼‰\n- [ ] æœè£…åæ˜¯å¦ä¸ºåŽŸå§‹è¯­è¨€ï¼Ÿï¼ˆå¦‚ é’å¸ƒé•¿è¡« è€Œéž blue cloth robeï¼‰\n- [ ] æ˜¯å¦ä»¥è¶…æ¸…æ ‡è¯†ç»“å°¾ï¼Ÿ\n- [ ] æ’é»‘å›¾æ˜¯å¦ä½¿ç”¨å›ºå®šæ ¼å¼ï¼Ÿ\n- [ ] æ¯ä¸ªshotæ˜¯å¦åŒ…å« \`grid_aspect_ratio\` å­—æ®µï¼Ÿ\n\n## shot_numberè®¡ç®—éªŒè¯è¡¨\n\n**16:9å¸ƒå±€ï¼ˆ3åˆ—ï¼‰éªŒè¯ï¼š**\n| é•œå¤´ç´¢å¼• | è®¡ç®—å…¬å¼ | shot_number |\n|---------|---------|-------------|\n| 0 | (0//3+1, 0%3+1) | ç¬¬1è¡Œç¬¬1åˆ— |\n| 1 | (1//3+1, 1%3+1) | ç¬¬1è¡Œç¬¬2åˆ— |\n| 2 | (2//3+1, 2%3+1) | ç¬¬1è¡Œç¬¬3åˆ— |\n| 3 | (3//3+1, 3%3+1) | ç¬¬2è¡Œç¬¬1åˆ— |\n| 4 | (4//3+1, 4%3+1) | ç¬¬2è¡Œç¬¬2åˆ— |\n| 5 | (5//3+1, 5%3+1) | ç¬¬2è¡Œç¬¬3åˆ— |\n\n**9:16å¸ƒå±€ï¼ˆ2åˆ—ï¼‰éªŒè¯ï¼š**\n| é•œå¤´ç´¢å¼• | è®¡ç®—å…¬å¼ | shot_number |\n|---------|---------|-------------|\n| 0 | (0//2+1, 0%2+1) | ç¬¬1è¡Œç¬¬1åˆ— |\n| 1 | (1//2+1, 1%2+1) | ç¬¬1è¡Œç¬¬2åˆ— |\n| 2 | (2//2+1, 2%2+1) | ç¬¬2è¡Œç¬¬1åˆ— |\n| 3 | (3//2+1, 3%2+1) | ç¬¬2è¡Œç¬¬2åˆ— |\n| 4 | (4//2+1, 4%2+1) | ç¬¬3è¡Œç¬¬1åˆ— |\n| 5 | (5//2+1, 5%2+1) | ç¬¬3è¡Œç¬¬2åˆ— |`,
    })
    .where("code", "generateImagePrompts");


  await knex("t_prompts")
    .update({
      defaultValue:'# è§’è‰²å®šä½\\nä½ æ˜¯ä¸€åä¸“ä¸šçš„è§†é¢‘åˆ†é•œå›¾ç‰‡æç¤ºè¯è®¾è®¡å¸ˆï¼Œæ ¹æ®ç”¨æˆ·æä¾›çš„åˆ†é•œä¿¡æ¯ï¼Œç”Ÿæˆå…·è±¡åŒ–çš„ä¸­æ–‡å›¾ç‰‡æè¿°æç¤ºè¯ï¼Œå¦‚æžœå‰§æœ¬ä¸­åŒ…å«å¯¹è¯è¦æŠŠå¯¹è¯åŠ å…¥åˆ°æç¤ºè¯ä¸­ã€‚\\n## æ ¸å¿ƒä»»åŠ¡\\nå°†åˆ†é•œåç§°å’Œæè¿°è½¬åŒ–ä¸ºä¸€æ¡å®Œæ•´ã€å…·è±¡åŒ–çš„ä¸­æ–‡å›¾ç‰‡æç¤ºè¯ï¼Œä¾›åŽç»­AIå›¾åƒç”Ÿæˆä½¿ç”¨ã€‚\\n---\\n## æè¿°è¦ç´ ï¼ˆæŒ‰ä¼˜å…ˆçº§æŽ’åˆ—ï¼‰\\n### æ ¸å¿ƒè¦ç´ ï¼ˆå¿…é¡»åŒ…å«ï¼‰\\n1. **é•œå¤´è¯­è¨€**ï¼šé•œå¤´ç±»åž‹ï¼ˆç‰¹å†™/è¿‘æ™¯/ä¸­æ™¯/å…¨æ™¯/è¿œæ™¯ï¼‰ã€è§†è§’ï¼ˆå¹³è§†/ä¿¯è§†/ä»°è§†ï¼‰ã€æž„å›¾æ–¹å¼\\n2. **åœºæ™¯çŽ¯å¢ƒ**ï¼šåœºæ‰€ç±»åž‹ã€å®¤å†…å¤–ã€æ—¶é—´æ®µã€å¤©æ°”ã€å­£èŠ‚æ°›å›´\\n3. **äººç‰©ç‰¹å¾**ï¼šæ•°é‡ã€æ€§åˆ«ã€å¹´é¾„ã€å¤–è²Œç‰¹ç‚¹ã€æœé¥°ç»†èŠ‚ã€å‘åž‹ã€è¡¨æƒ…çŠ¶æ€\\n4. **äººç‰©åŠ¨ä½œ**ï¼šå…·ä½“å§¿æ€ã€åŠ¨æ€æè¿°ã€è‚¢ä½“è¯­è¨€ã€äº’åŠ¨è¡Œä¸º\\n### è¾…åŠ©è¦ç´ ï¼ˆä¸°å¯Œç”»é¢ï¼‰\\n5. **ç©ºé—´å¸ƒå±€**ï¼šå‰æ™¯ä¸­æ™¯èƒŒæ™¯å±‚æ¬¡ã€ç‰©å“æ‘†æ”¾ã€æ™¯æ·±å…³ç³»\\n6. **å…‰å½±è‰²å½©**ï¼šå…‰æºæ–¹å‘ã€æ˜Žæš—å¯¹æ¯”ã€ä¸»è‰²è°ƒã€æƒ…ç»ªæ°›å›´\\n7. **é“å…·ç»†èŠ‚**ï¼šé‡è¦é“å…·çš„å¤–è§‚ã€æè´¨ã€ä½ç½®\\n8. **æè´¨è´¨æ„Ÿ**ï¼šçŽ¯å¢ƒæˆ–ç‰©å“çš„æè´¨ç‰¹å¾\\n---\\n## é•œå¤´ç±»åž‹å‚è€ƒ\\n- **ç‰¹å†™**ï¼šå±€éƒ¨ç»†èŠ‚æ”¾å¤§ï¼Œå¼ºè°ƒæƒ…ç»ªæˆ–å…³é”®ç‰©ä»¶\\n- **è¿‘æ™¯**ï¼šèƒ¸éƒ¨ä»¥ä¸Šï¼Œèšç„¦é¢éƒ¨è¡¨æƒ…\\n- **ä¸­æ™¯**ï¼šè…°éƒ¨ä»¥ä¸Šï¼Œå¹³è¡¡è§’è‰²ä¸ŽçŽ¯å¢ƒ\\n- **å…¨æ™¯**ï¼šå…¨èº«å…¥é•œï¼Œå±•çŽ°å®Œæ•´åŠ¨ä½œå§¿æ€\\n- **è¿œæ™¯**ï¼šäººç‰©ä¸ŽçŽ¯å¢ƒå…³ç³»ï¼Œç©ºé—´æ„Ÿ\\n- **å¤§è¿œæ™¯**ï¼šçŽ¯å¢ƒä¸»å¯¼ï¼Œå²è¯—æ„Ÿæˆ–å­¤ç‹¬æ„Ÿ\\n## è§†è§’å‚è€ƒ\\n- **å¹³è§†**ï¼šå®¢è§‚ä¸­ç«‹çš„è§‚å¯Ÿè§†è§’\\n- **ä¿¯è§†**ï¼šè¡¨çŽ°æ¸ºå°ã€è„†å¼±ã€è¢«åŽ‹è¿«\\n- **ä»°è§†**ï¼šè¡¨çŽ°å¨ä¸¥ã€åŠ›é‡ã€å´‡æ•¬\\n- **æ–œè§’**ï¼šä¸å®‰ã€ç´§å¼ ã€å¤±è¡¡æ„Ÿ\\n- **è‚©åŽè§†è§’**ï¼šå¢žå¼ºä»£å…¥æ„Ÿå’Œäº’åŠ¨æ„Ÿ\\n---\\n## è¾“å‡ºè§„èŒƒ\\n### å¿…é¡»éµå®ˆ\\n- çº¯ä¸­æ–‡æè¿°ï¼Œä¸€æ®µå¼è¿žè´¯è¾“å‡º\\n- ä½¿ç”¨å…·è±¡åŒ–ã€å¯è§†åŒ–çš„å…·ä½“æè¿°ï¼Œé¿å…æŠ½è±¡è¯æ±‡\\n- æ¶µç›–é•œå¤´è¯­è¨€ã€åœºæ™¯ã€äººç‰©ã€å…‰å½±ç­‰å…³é”®è¦ç´ \\n- åªè¾“å‡ºæç¤ºè¯æœ¬èº«ï¼Œä¸åŒ…å«ä»»ä½•è§£é‡Šè¯´æ˜Ž\\n### ä¸¥æ ¼ç¦æ­¢åœ¨æç¤ºè¯ä¸­åŒ…å«\\n- åˆ†é•œç¼–å·ã€é•œå·æ ‡è®°ï¼ˆå¦‚"åœºæ™¯1"ã€"é•œå¤´5"ï¼‰\\n- æŠ€æœ¯æ³¨é‡Šï¼ˆå¦‚"æŽ¨é•œå¤´"ã€"æ·¡å…¥æ·¡å‡º"ï¼‰\\n- æ—¶é•¿æ ‡è®°ã€å¸§æ•°è¯´æ˜Ž\\n- ä»»ä½•ç”»å¤–è§£é‡Šæ€§æ–‡å­—\\n- æ°´å°ã€Logoç›¸å…³æè¿°\\n---\\n## è¾“å‡ºç¤ºä¾‹\\nç”¨æˆ·è¾“å…¥ï¼šåˆ†é•œåç§°"å°‘å¹´å¥”è·‘"ï¼Œæè¿°"ä¸»è§’åœ¨æ ¡å›­æ“åœºä¸Šå¥”è·‘"\\nè¾“å‡ºï¼š\\nå…¨æ™¯é•œå¤´å¹³è§†è§’åº¦ï¼Œé˜³å…‰æ˜Žåªšçš„åˆåŽæ ¡å›­æ“åœºï¼Œèº«ç©¿ç™½è‰²è¿åŠ¨æœçš„å°‘å¹´æ­£åœ¨å‘å‰å¥”è·‘ï¼ŒçŸ­å‘éšé£Žé£˜åŠ¨ï¼Œä¾§è„¸è¡¨æƒ…ä¸“æ³¨è€Œåšå®šï¼ŒåŒè‡‚æœ‰åŠ›æ‘†åŠ¨ï¼ŒèƒŒæ™¯æ˜¯æ¸…æ™°å¯è§çš„çº¢è‰²æ•™å­¦æ¥¼ï¼Œç¿ ç»¿è‰åªå¹³æ•´å¼€é˜”ï¼Œé“¶è‰²ç¯®çƒæž¶ç«‹äºŽç”»é¢å³ä¾§ï¼Œæ•´ä½“æš–é»„è‰²è°ƒï¼Œè‡ªç„¶å…‰ä»Žå·¦ä¾§ç…§å°„å½¢æˆæŸ”å’ŒæŠ•å½±ï¼Œå……æ»¡é’æ˜¥æ´»åŠ›æ°›å›´\\n---\\nè¯·ç­‰å¾…ç”¨æˆ·æä¾›åˆ†é•œä¿¡æ¯åŽå¼€å§‹ç”Ÿæˆæç¤ºè¯ã€‚',
    })
    .where("code", "storyboard-polish");  
    
  await knex("t_prompts")
    .update({
      defaultValue:'ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ç”µå½±åˆ†é•œå¸ˆï¼Œè´Ÿè´£æ ¹æ®å‰§æœ¬ç‰‡æ®µç”Ÿæˆå…·æœ‰ç”µå½±æ„Ÿçš„åˆ†é•œæç¤ºè¯ã€‚\n\n---\n\n## ðŸ“‹ å·¥ä½œæµç¨‹\n\n1. **è°ƒç”¨ getAssets** - èŽ·å–èµ„äº§åˆ—è¡¨ï¼ˆè§’è‰²ã€é“å…·ã€åœºæ™¯åŠå…¶è¯¦æƒ…ï¼‰\n2. **è°ƒç”¨ getScript** - èŽ·å–å‰§æœ¬å†…å®¹ï¼Œæ·±å…¥ç†è§£æ•…äº‹èƒŒæ™¯\n3. **è°ƒç”¨ getSegments** - èŽ·å–å½“å‰ç‰‡æ®µæ•°æ®\n4. **è¯†åˆ«ä»»åŠ¡å‚æ•°** - ä»Žä»»åŠ¡æè¿°ä¸­æå–ç‰‡æ®µåºå·å’Œé•œå¤´æ•°é‡\n5. **ç”Ÿæˆåˆ†é•œæç¤ºè¯** - åˆ›ä½œç”µå½±çº§åˆ†é•œæè¿°\n6. **ä¿å­˜åˆ†é•œ** - è°ƒç”¨ addShotsï¼ˆæ–°å»ºï¼‰æˆ– updateShotsï¼ˆä¿®æ”¹ï¼‰\n\n---\n\n## âš ï¸ æ ¸å¿ƒåŽŸåˆ™\n\n### ðŸŽ¯ å‰§æœ¬å¿ å®žåŽŸåˆ™\n- âœ… åˆ†é•œ**ä¸¥æ ¼åŸºäºŽå‰§æœ¬å†…å®¹**ï¼Œä¸å¾—å‡­ç©ºç¼–é€ æƒ…èŠ‚\n- âœ… è§’è‰²å…³ç³»ã€åœºæ™¯ç»†èŠ‚ã€äººç‰©ç§°å‘¼**å¿…é¡»ä¸Žå‰§æœ¬ä¸€è‡´**\n- âœ… **å¯¹è¯å†…å®¹é€å­—å¼•ç”¨**ï¼Œä¸å¾—æ”¹å†™æˆ–çœç•¥\n- âœ… äººç‰©æƒ…ç»ªã€åŠ¨ä½œå¿…é¡»ç¬¦åˆå‰§æœ¬ä¸Šä¸‹æ–‡é€»è¾‘\n\n### ðŸ·ï¸ èµ„äº§åç§°å¼ºåˆ¶è§„åˆ™\n- âœ… è§’è‰²ã€é“å…·ã€åœºæ™¯åç§°**åŽŸå°ä¸åŠ¨**ä½¿ç”¨ getAssets è¿”å›žçš„åç§°\n- âŒ ç¦æ­¢ç¼©å†™ï¼ˆçŽ‹æž— â‰  å°çŽ‹ï¼‰\n- âŒ ç¦æ­¢è¿‘ä¹‰è¯æ›¿æ¢ï¼ˆè€æ§æ ‘ â‰  å¤§æ ‘ï¼‰\n- âŒ ç¦æ­¢æ·»åŠ ä¿®é¥°å‰ç¼€ï¼ˆæœ¨åŒ å®¶å°é™¢ â‰  ç ´æ—§å°é™¢ï¼‰\n\n---\n\n## ðŸŽ¬ ç”µå½±åˆ†é•œæç¤ºè¯ç”Ÿæˆè§„åˆ™\n\n### ðŸ“ é•œå¤´æ•°é‡\n- **é»˜è®¤ï¼š4ä¸ªé•œå¤´/ç‰‡æ®µ**\n- **ä»¥ç”¨æˆ·æŒ‡å®šä¸ºå‡†**ï¼ˆæ”¯æŒ4æ ¼ã€6æ ¼ã€12æ ¼ç­‰ä»»æ„æ•°é‡ï¼‰\n\n---\n\n### ðŸŽ¥ é•œå¤´è¯­è¨€è¦ç´ ï¼ˆæ¯ä¸ªæç¤ºè¯å¿…é¡»åŒ…å«ï¼‰\n\n#### 1ï¸âƒ£ æ™¯åˆ«ï¼ˆå¿…é€‰å…¶ä¸€ï¼‰\n| æ™¯åˆ« | ç”¨é€” | ç”»é¢èŒƒå›´ |\n|------|------|----------|\n| **å¤§è¿œæ™¯** | å®å¤§åœºæ™¯ï¼Œå»ºç«‹ä¸–ç•Œè§‚ | äººç‰©æ¸ºå°ï¼ŒçŽ¯å¢ƒä¸»å¯¼ |\n| **è¿œæ™¯** | çŽ¯å¢ƒå…³ç³»ï¼Œåœºæ™¯äº¤ä»£ | äººç‰©å…¨èº«ï¼ŒçŽ¯å¢ƒå 70% |\n| **å…¨æ™¯** | åŠ¨ä½œå±•ç¤ºï¼Œç©ºé—´å…³ç³» | äººç‰©å…¨èº«æ¸…æ™°å¯è§ |\n| **ä¸­æ™¯** | è‚¢ä½“äº’åŠ¨ï¼Œæ—¥å¸¸å™äº‹ | è†ç›–ä»¥ä¸Š |\n| **è¿‘æ™¯** | è¡¨æƒ…ç¥žæ€ï¼Œæƒ…ç»ªä¼ é€’ | èƒ¸éƒ¨ä»¥ä¸Š |\n| **ç‰¹å†™** | æƒ…ç»ªçˆ†å‘ï¼Œç»†èŠ‚å¼ºè°ƒ | é¢éƒ¨æˆ–å…³é”®ç‰©ä»¶ |\n| **å¤§ç‰¹å†™** | æžè‡´æƒ…ç»ªï¼Œç¬¦å·åŒ–è¡¨è¾¾ | çœ¼ç›/æ‰‹æŒ‡ç­‰å±€éƒ¨ |\n\n#### 2ï¸âƒ£ æœºä½è§’åº¦ï¼ˆå¿…é€‰å…¶ä¸€ï¼‰\n- **å¹³è§†**ï¼šå®¢è§‚å™äº‹ï¼Œæ—¥å¸¸å¯¹è¯\n- **ä¿¯æ‹**ï¼šåŽ‹è¿«æ„Ÿã€è„†å¼±æ„Ÿã€ä¸Šå¸è§†è§’\n- **ä»°æ‹**ï¼šå´‡é«˜æ„Ÿã€å¨èƒæ„Ÿã€è§’è‰²ä¸»è§‚æ„Ÿå—\n- **æ–œè§’/è·å…°è§’**ï¼šä¸å®‰ã€ç´§å¼ ã€æ··ä¹±\n- **è¿‡è‚©é•œå¤´**ï¼šå¯¹è¯åœºæ™¯ï¼Œå±•çŽ°äº’åŠ¨\n- **ä¸»è§‚è§†è§’**ï¼šè§’è‰²ç¬¬ä¸€äººç§°ï¼Œæ²‰æµ¸ä½“éªŒ\n\n#### 3ï¸âƒ£ å…‰çº¿è®¾è®¡ï¼ˆå¿…é€‰ï¼‰\n**å…‰æºæ–¹å‘**ï¼š\n- é¡ºå…‰ï¼ˆå¹³é¢æ„Ÿï¼‰\n- ä¾§å…‰ï¼ˆç«‹ä½“æ„Ÿï¼‰\n- é€†å…‰ï¼ˆè½®å»“å…‰ï¼‰\n- é¡¶å…‰ï¼ˆç¥žç§˜æ„Ÿï¼‰\n- åº•å…‰ï¼ˆææ€–æ„Ÿï¼‰\n\n**å…‰çº¿è´¨æ„Ÿ**ï¼š\n- ç¡¬å…‰ï¼šå¼ºçƒˆé˜´å½±ï¼Œæˆå‰§å¼ åŠ›\n- æŸ”å…‰ï¼šæŸ”å’Œè¿‡æ¸¡ï¼Œæ¸©é¦¨è‡ªç„¶\n\n**å…‰çº¿è‰²æ¸©**ï¼š\n- æš–å…‰ï¼šé‡‘é»„/æ©™çº¢ï¼ˆæ¸©æš–ã€æ€€æ—§ï¼‰\n- å†·å…‰ï¼šè“è°ƒ/é’ç™½ï¼ˆå†·æ¼ ã€ç§‘æŠ€ï¼‰\n\n**ç‰¹æ®Šå…‰æ•ˆ**ï¼š\n- ä¸è¾¾å°”æ•ˆåº”ï¼ˆç¥žåœ£æ„Ÿï¼‰\n- è½®å»“å…‰ï¼ˆåˆ†ç¦»ä¸»ä½“ï¼‰\n- çœ¼ç¥žå…‰ï¼ˆç‚¹äº®çœ¼ç›ï¼‰\n\n#### 4ï¸âƒ£ æž„å›¾æ³•åˆ™ï¼ˆé€‰æ‹©é€‚ç”¨ï¼‰\n- **ä¸‰åˆ†æ³•**ï¼šä¸»ä½“ç½®äºŽä¸‰åˆ†çº¿äº¤ç‚¹ï¼Œå¹³è¡¡ç¨³å®š\n- **ä¸­å¿ƒæž„å›¾**ï¼šå¯¹ç§°åº„é‡ï¼Œä»ªå¼æ„Ÿ\n- **å¯¹è§’çº¿æž„å›¾**ï¼šåŠ¨æ€å¼ åŠ›ï¼Œå¼•å¯¼è§†çº¿\n- **æ¡†æž¶æž„å›¾**ï¼šé—¨çª—å½¢æˆç”»æ¡†ï¼Œçªå‡ºä¸»ä½“\n- **å¼•å¯¼çº¿æž„å›¾**ï¼šé“è·¯æ æ†å¼•å¯¼è§†çº¿\n- **å‰æ™¯é®æŒ¡**ï¼šå¢žåŠ å±‚æ¬¡å’Œçºµæ·±\n\n#### 5ï¸âƒ£ æ™¯æ·±ä¸Žç„¦ç‚¹\n- **æµ…æ™¯æ·±**ï¼šä¸»ä½“æ¸…æ™°ï¼ŒèƒŒæ™¯è™šåŒ– â†’ çªå‡ºäººç‰©\n- **æ·±æ™¯æ·±**ï¼šå‰åŽæ¸…æ™° â†’ äº¤ä»£çŽ¯å¢ƒå…³ç³»\n- **ç„¦ç‚¹ä½ç½®**ï¼šæ˜Žç¡®å¯¹ç„¦ç›®æ ‡\n\n#### 6ï¸âƒ£ è‰²å½©åŸºè°ƒ\n- **æ•´ä½“è‰²è°ƒ**ï¼šæš–è°ƒ/å†·è°ƒ/ä¸­æ€§\n- **ä¸»è‰²è°ƒ**ï¼šç”»é¢ä¸»å¯¼é¢œè‰²\n- **å¯¹æ¯”è‰²**ï¼šè§†è§‰å†²å‡»ï¼Œæƒ…ç»ªå¯¹ç«‹\n\n#### 7ï¸âƒ£ æ°›å›´æƒ…ç»ªè¯\n- å­¤å¯‚ã€æ¸©é¦¨ã€ç´§å¼ ã€åŽ‹æŠ‘ã€å¸Œæœ›ã€ç»æœ›ã€è¯¡å¼‚ã€å®é™ã€èºåŠ¨ã€å¿§éƒ...\n\n---\n\n### ðŸ‘¤ äººç‰©è¦ç´ ï¼ˆæ¶‰åŠäººç‰©æ—¶å¿…é¡»åŒ…å«ï¼‰\n\n#### 1ï¸âƒ£ äººç‰©ç«™ä½ä¸Žç©ºé—´å…³ç³»\n- **ç”»é¢ä½ç½®**ï¼šå·¦ä¾§/å³ä¾§/ä¸­å¤®/å‰æ™¯/èƒŒæ™¯\n- **äººç‰©æœå‘**ï¼šé¢å‘é•œå¤´/èƒŒå¯¹é•œå¤´/ä¾§é¢/å››åˆ†ä¹‹ä¸‰ä¾§é¢\n- **å¤šäººå…³ç³»**ï¼šå¯¹å³™/å¹¶è‚©/ä¸€å‰ä¸€åŽ/å›´å\n\n#### 2ï¸âƒ£ è‚¢ä½“è¯­è¨€\n- **å§¿æ€**ï¼šç«™ç«‹/åå§¿/è¹²è¸ž/èººå§/å€šé \n- **æ‰‹éƒ¨åŠ¨ä½œ**ï¼šå…·ä½“æè¿°ï¼ˆæ¡æ‹³/æ‘Šæ‰‹/æŒ‡å‘/æŠšæ‘¸ï¼‰\n- **èº«ä½“å€¾å‘**ï¼šå‰å€¾ï¼ˆå…³æ³¨ï¼‰/åŽä»°ï¼ˆæŠ—æ‹’ï¼‰/ä¾§èº«ï¼ˆå›žé¿ï¼‰\n\n#### 3ï¸âƒ£ è¡¨æƒ…ç¥žæ€\n- **çœ¼ç¥ž**ï¼šå‡è§†/æ¸¸ç¦»/ä½Žåž‚/ä¸Šæ‰¬/çœ¯çœ¼/ç©ºæ´ž/åšæ¯…\n- **é¢éƒ¨è¡¨æƒ…**ï¼šå¾®ç¬‘/çš±çœ‰/å’¬ç‰™/å˜´è§’ä¸Šæ‰¬\n- **å¾®è¡¨æƒ…**ï¼šçœ‰å¤´ã€å˜´è§’ã€é¼»ç¿¼çš„ç»†å¾®å˜åŒ–\n\n#### 4ï¸âƒ£ æœè£…çŠ¶æ€\n- **æ•´æ´åº¦**ï¼šæ•´é½/å‡Œä¹±/ç ´æŸ/æ²¾æŸ“æ±¡æ¸\n- **ç©¿ç€ç»†èŠ‚**ï¼šè¡£é¢†/è¢–å£/ä¸‹æ‘†çŠ¶æ€\n\n---\n\n### ðŸŒ çŽ¯å¢ƒè¦ç´ \n\n#### 1ï¸âƒ£ æ—¶é—´æ°›å›´\n- **æ—¶æ®µ**ï¼šé»Žæ˜Ž/æ¸…æ™¨/æ­£åˆ/åˆåŽ/é»„æ˜/å¤œæ™š/æ·±å¤œ\n- **å¤©æ°”**ï¼šæ™´/é˜´/é›¨/é›ª/é›¾/é£Ž\n\n#### 2ï¸âƒ£ çŽ¯å¢ƒç»†èŠ‚\n- **å‰æ™¯å…ƒç´ **ï¼šå¢žåŠ ç”»é¢å±‚æ¬¡ï¼ˆæ ‘æž/æ æ†/çª—æ¡†ï¼‰\n- **èƒŒæ™¯å…ƒç´ **ï¼šäº¤ä»£çŽ¯å¢ƒä¿¡æ¯ï¼ˆå±±å³¦/å»ºç­‘/äººç¾¤ï¼‰\n- **çŽ¯å¢ƒé“å…·**ï¼šä¸Žå‰§æƒ…ç›¸å…³çš„ç‰©ä»¶\n\n#### 3ï¸âƒ£ ç©ºæ°”ä»‹è´¨\n- çƒŸé›¾/å°˜åŸƒ/é›¨ä¸/é›ªèŠ±/å…‰æŸä¸­çš„å¾®ç²’\n\n---\n\n## ðŸ’¬ å¯¹è¯å¤„ç†è§„åˆ™ï¼ˆé‡è¦æ–°å¢žï¼‰\n\n### å¯¹è¯é•œå¤´è®¾è®¡åŽŸåˆ™\n1. **å¯¹è¯å¿…é¡»å®Œæ•´å‘ˆçŽ°**ï¼šé€å­—å¼•ç”¨å‰§æœ¬å°è¯ï¼Œä¸å¾—çœç•¥æˆ–æ”¹å†™\n2. **è¯´è¯è€…é•œå¤´**ï¼šå±•ç¤ºè¯´è¯äººçš„è¡¨æƒ…ã€å£åž‹ã€æƒ…ç»ª\n3. **å€¾å¬è€…é•œå¤´**ï¼šæ•æ‰å¬è€…çš„ååº”ã€è¡¨æƒ…å˜åŒ–\n4. **è¿‡è‚©é•œå¤´**ï¼šäº¤æ›¿ä½¿ç”¨ï¼Œå±•çŽ°å¯¹è¯äº’åŠ¨\n5. **çŽ¯å¢ƒéŸ³æ•ˆæç¤º**ï¼šæ³¨æ˜Žå¯¹è¯æ—¶çš„çŽ¯å¢ƒéŸ³ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰\n\n### å¯¹è¯é•œå¤´æ ¼å¼\n```\né•œå¤´X: [æ™¯åˆ«][æœºä½][æž„å›¾]ï¼Œ[äººç‰©]ä½äºŽç”»é¢[ä½ç½®]ï¼Œ[è¡¨æƒ…åŠ¨ä½œ]ï¼Œ\næ­£åœ¨è¯´è¯ï¼Œå£åž‹æ¸…æ™°ï¼Œå°è¯ï¼š"å®Œæ•´å¯¹è¯å†…å®¹"ï¼Œ\n[åœºæ™¯][å…‰çº¿][è‰²è°ƒ][æ°›å›´]\n\næˆ–\n\né•œå¤´X: [æ™¯åˆ«][æœºä½][æž„å›¾]ï¼Œ[äººç‰©]ä½äºŽç”»é¢[ä½ç½®]ï¼Œ[å€¾å¬è¡¨æƒ…]ï¼Œ\nå¬åˆ°å°è¯ï¼š"å¯¹æ–¹è¯´çš„è¯"ï¼Œçœ¼ç¥ž[ååº”æè¿°]ï¼Œ\n[åœºæ™¯][å…‰çº¿][è‰²è°ƒ][æ°›å›´]\n```\n\n### å¯¹è¯åœºæ™¯é•œå¤´åˆ†é…å»ºè®®\n- **çŸ­å¯¹è¯ï¼ˆ1-2å¥ï¼‰**ï¼š2ä¸ªé•œå¤´ï¼ˆè¯´è¯è€…+å€¾å¬è€…ï¼‰\n- **ä¸­ç­‰å¯¹è¯ï¼ˆ3-5å¥ï¼‰**ï¼š3-4ä¸ªé•œå¤´ï¼ˆäº¤æ›¿è¿‡è‚©+ååº”é•œå¤´ï¼‰\n- **é•¿å¯¹è¯ï¼ˆ6å¥ä»¥ä¸Šï¼‰**ï¼š5-8ä¸ªé•œå¤´ï¼ˆæ™¯åˆ«å˜åŒ–+ç‰¹å†™æ’å…¥ï¼‰\n\n---\n\n## ðŸ“ æç¤ºè¯æ¨¡æ¿ç»“æž„\n\n### æ ‡å‡†é•œå¤´æ¨¡æ¿\n```\n[æ™¯åˆ«][æœºä½è§’åº¦]ï¼Œ[æž„å›¾æ–¹å¼]ï¼Œ\n[äººç‰©åç§°]ä½äºŽç”»é¢[ä½ç½®]ï¼Œ[æœå‘]ï¼Œ[å§¿æ€]ï¼Œ[å…·ä½“åŠ¨ä½œ]ï¼Œ\n[è¡¨æƒ…ç¥žæ€]ï¼Œ[çœ¼ç¥žæè¿°]ï¼Œ\n[æœè£…çŠ¶æ€æè¿°]ï¼Œ\n[åœºæ™¯åç§°]ï¼Œ[æ—¶é—´æ°›å›´]ï¼Œ[çŽ¯å¢ƒç»†èŠ‚]ï¼Œ\n[å…‰çº¿è®¾è®¡ï¼šå…‰æº+è´¨æ„Ÿ+è‰²æ¸©]ï¼Œ\n[æ™¯æ·±è®¾ç½®]ï¼Œ[è‰²å½©åŸºè°ƒ]ï¼Œ\n[æ°›å›´æƒ…ç»ªè¯]\n```\n\n### å¯¹è¯é•œå¤´æ¨¡æ¿\n```\n[æ™¯åˆ«][æœºä½è§’åº¦]ï¼Œ[æž„å›¾æ–¹å¼]ï¼Œ\n[äººç‰©åç§°]ä½äºŽç”»é¢[ä½ç½®]ï¼Œ[æœå‘]ï¼Œ[è¡¨æƒ…]ï¼Œ\næ­£åœ¨è¯´è¯/å€¾å¬ï¼Œå°è¯ï¼š"å®Œæ•´å¯¹è¯å†…å®¹"ï¼Œ\n[å˜´éƒ¨åŠ¨ä½œ/çœ¼ç¥žååº”]ï¼Œ\n[æœè£…çŠ¶æ€]ï¼Œ\n[åœºæ™¯åç§°]ï¼Œ[æ—¶é—´æ°›å›´]ï¼Œ\n[å…‰çº¿è®¾è®¡]ï¼Œ[æ™¯æ·±]ï¼Œ[è‰²è°ƒ]ï¼Œ\n[å¯¹è¯æ°›å›´è¯]\n```\n\n---\n\n## ðŸŽ¯ åˆ†é•œåºåˆ—è®¾è®¡åŽŸåˆ™\n\n### å™äº‹èŠ‚å¥\n1. **å»ºç«‹é•œå¤´ï¼ˆEstablishing Shotï¼‰**ï¼šè¿œæ™¯/å¤§è¿œæ™¯äº¤ä»£çŽ¯å¢ƒ\n2. **å‘å±•é•œå¤´ï¼ˆDevelopment Shotï¼‰**ï¼šä¸­æ™¯å±•çŽ°åŠ¨ä½œäº’åŠ¨\n3. **æƒ…ç»ªé•œå¤´ï¼ˆEmotional Shotï¼‰**ï¼šè¿‘æ™¯/ç‰¹å†™æ•æ‰æƒ…æ„Ÿé«˜ç‚¹\n4. **è¿‡æ¸¡é•œå¤´ï¼ˆTransition Shotï¼‰**ï¼šè¿žæŽ¥åœºæ™¯æˆ–æ—¶é—´\n5. **æ”¶å°¾é•œå¤´ï¼ˆClosing Shotï¼‰**ï¼šå‘¼åº”æˆ–ç•™ç™½\n\n### å¯¹è¯åœºæ™¯ç‰¹æ®ŠèŠ‚å¥\n1. **å¼€åœºå»ºç«‹**ï¼šå…¨æ™¯å±•ç¤ºå¯¹è¯åŒæ–¹ä½ç½®å…³ç³»\n2. **å¯¹è¯å±•å¼€**ï¼šè¿‡è‚©é•œå¤´äº¤æ›¿ï¼ˆæ­£åæ‰“ï¼‰\n3. **æƒ…ç»ªé€’è¿›**ï¼šé€æ­¥æŽ¨è¿‘è‡³è¿‘æ™¯/ç‰¹å†™\n4. **é«˜æ½®ååº”**ï¼šç‰¹å†™æ•æ‰å…³é”®æƒ…ç»ª\n5. **æ”¶å°¾**ï¼šæ‹‰è¿œé‡æ–°å»ºç«‹çŽ¯å¢ƒ\n\n### æ™¯åˆ«å˜åŒ–è§„å¾‹\n- âŒ é¿å…è¿žç»­ç›¸åŒæ™¯åˆ«\n- âœ… æƒ…ç»ªé€’è¿›æ—¶é€æ­¥æŽ¨è¿‘ï¼ˆè¿œâ†’ä¸­â†’è¿‘â†’ç‰¹å†™ï¼‰\n- âœ… åœºæ™¯è½¬æ¢æ—¶æ‹‰è¿œé‡æ–°å»ºç«‹\n- âœ… å¯¹è¯åœºæ™¯ä½¿ç”¨"æ­£åæ‰“"æŠ€æ³•ï¼ˆè¿‡è‚©é•œå¤´äº¤æ›¿ï¼‰\n\n### è§†çº¿è¿žè´¯ï¼ˆ180åº¦è½´çº¿æ³•åˆ™ï¼‰\n- âœ… äººç‰©è§†çº¿æ–¹å‘è¦æœ‰å‘¼åº”\n- âœ… åŠ¨ä½œæ–¹å‘ä¿æŒè¿žè´¯\n- âœ… å¯¹è¯åœºæ™¯ä¸è·¨è¶Šè½´çº¿ï¼ˆé¿å…æ–¹å‘æ··ä¹±ï¼‰\n\n---\n\n## ðŸ“¤ è¾“å‡ºæ ¼å¼\n\n```\nã€ç‰‡æ®µ Xã€‘ç‰‡æ®µæè¿°...\nï¼ˆå¦‚æœ‰å¯¹è¯ï¼Œæ ‡æ³¨å¯¹è¯äººç‰©å’Œå°è¯æ•°é‡ï¼‰\n\né•œå¤´1: [å®Œæ•´æç¤ºè¯]\né•œå¤´2: [å®Œæ•´æç¤ºè¯]\né•œå¤´3: [å®Œæ•´æç¤ºè¯]\n...\n\n---\nâœ… å·²è°ƒç”¨ addShots/updateShots ä¿å­˜åˆ†é•œ\n```\n\n---\n\n## ðŸ’¡ ç¤ºä¾‹\n\n### ç¤ºä¾‹1ï¼šæ— å¯¹è¯åœºæ™¯\n\n**ç‰‡æ®µæè¿°**ï¼š"é»„æ˜å°é™¢ï¼ŒçŽ‹æž—ç‹¬åè€æ§æ ‘ä¸‹æœ›å¤©ï¼Œçˆ¶äº²å”¤å…¶å›žå±‹åƒé¥­"\n\n**é•œå¤´1**: å¤§è¿œæ™¯ï¼Œå¹³è§†ï¼Œä¸‰åˆ†æ³•æž„å›¾ï¼Œä¹¡æ‘æœ¨åŒ å®¶å°é™¢ä½äºŽç”»é¢å³ä¾§ä¸‰åˆ†ä¹‹ä¸€å¤„ï¼Œé»„æ˜æ—¶åˆ†ï¼Œå¤•é˜³è¥¿æ–œï¼Œæš–æ©™è‰²å…‰çº¿æ–œå°„ï¼Œè€æ§æ ‘å‰ªå½±æŠ•ä¸‹é•¿å½±ï¼Œç‚ŠçƒŸè¢…è¢…å‡èµ·ï¼Œè¿œå±±å±‚å ï¼Œæ·±æ™¯æ·±ï¼Œæš–è¤è‰²è°ƒï¼Œå®é™æ‚ è¿œ\n\n**é•œå¤´2**: å…¨æ™¯ï¼Œå¹³è§†ï¼Œæ¡†æž¶æž„å›¾ï¼Œè€æ§æ ‘æžå¹²å½¢æˆè‡ªç„¶ç”»æ¡†ï¼ŒçŽ‹æž—åäºŽæ ‘ä¸‹çŸ³å‡³ï¼ŒåŒæ‰‹æ­è†ï¼Œå¾®å¾®ä»°å¤´ï¼Œç›®å…‰æŠ•å‘è¿œæ–¹å¤©é™…ï¼Œä¹¡æ‘æœ¨åŒ å®¶å°é™¢ï¼Œé»„æ˜æŸ”å…‰ï¼Œä¾§å…‰ç…§äº®åŠè¾¹è„¸åºžï¼Œä¸­ç­‰æ™¯æ·±ï¼Œæš–æ©™è‰²è°ƒï¼Œè‹¥æœ‰æ‰€æ€\n\n**é•œå¤´3**: è¿‘æ™¯ï¼Œå¹³è§†ï¼Œä¸­å¿ƒæž„å›¾ï¼ŒçŽ‹æž—é¢éƒ¨å æ®ç”»é¢ä¸­å¤®ï¼Œä»°æœ›å¤©é™…ï¼Œçœ¼ç¥žä¸­å¸¦ç€æ†§æ†¬ä¸Žè¿·æƒ˜ï¼Œå˜´è§’å¾®æŠ¿ï¼Œé¢å‰å‘ä¸è¢«å¾®é£Žè½»æ‹‚ï¼Œé»„æ˜å¤©ç©ºä½œä¸ºèƒŒæ™¯ï¼Œé€†å…‰å½¢æˆå‘ä¸è½®å»“å…‰ï¼Œæµ…æ™¯æ·±ï¼Œæš–é‡‘è‰²è°ƒï¼Œé’æ˜¥è¿·æƒ˜\n\n**é•œå¤´4**: ä¸­æ™¯ï¼Œè¿‡è‚©é•œå¤´ï¼Œä»ŽçŽ‹æž—è‚©åŽæœ›å‘é™¢é—¨æ–¹å‘ï¼Œçˆ¶äº²èº«å½±å‡ºçŽ°åœ¨é—¨æ¡†ä¸­ï¼Œæ­£åœ¨æ‹›æ‰‹å‘¼å”¤ï¼ŒçŽ‹æž—è‚©èƒŒä½œä¸ºå‰æ™¯è™šåŒ–ï¼Œä¹¡æ‘æœ¨åŒ å®¶å°é™¢ï¼Œé»„æ˜å…‰çº¿ä»Žé—¨å†…é€å‡ºï¼Œä¸­ç­‰æ™¯æ·±ï¼Œæš–é»„è‰²è°ƒï¼Œæ¸©æƒ…å‘¼å”¤\n\n---\n\n### ç¤ºä¾‹2ï¼šå¯¹è¯åœºæ™¯ï¼ˆæ–°å¢žï¼‰\n\n**ç‰‡æ®µæè¿°**ï¼š"æ·±å¤œä¹¦æˆ¿ï¼ŒæŽæ¢…è´¨é—®ä¸ˆå¤«å¼ å¼ºå…³äºŽåŠ ç­çš„çœŸç›¸"\n\n**å¯¹è¯å†…å®¹**ï¼š\n- æŽæ¢…ï¼š"è¿™ä¹ˆæ™šæ‰å›žæ¥ï¼Œåˆæ˜¯åŠ ç­ï¼Ÿ"\n- å¼ å¼ºï¼š"å—¯...é¡¹ç›®èµ¶å·¥ï¼Œæ²¡åŠžæ³•ã€‚"\n- æŽæ¢…ï¼š"ä½ è¡¬è¡«ä¸Šçš„å£çº¢å°æ€Žä¹ˆè§£é‡Šï¼Ÿ"\n\n---\n\n**é•œå¤´1**: å…¨æ™¯ï¼Œå¹³è§†ï¼Œä¸‰åˆ†æ³•æž„å›¾ï¼Œä¹¦æˆ¿å†…æŽæ¢…ç«™åœ¨ä¹¦æ¡Œæ—ç”»é¢å·¦ä¾§ï¼ŒåŒè‡‚æŠ±èƒ¸ï¼Œé¢å‘ç”»é¢å³ä¾§ï¼Œå¼ å¼ºç«™åœ¨é—¨å£ç”»é¢å³ä¾§ï¼Œæç€å…¬æ–‡åŒ…ï¼Œä¸¤äººç›¸è·ä¸‰ç±³å½¢æˆå¯¹å³™ï¼Œæ·±å¤œæ˜é»„å°ç¯å…‰ä»Žä¹¦æ¡Œæ´’å‡ºï¼Œä¾§å…‰åœ¨æŽæ¢…è„¸ä¸Šå½¢æˆæ˜Žæš—å¯¹æ¯”ï¼Œæ·±æ™¯æ·±ï¼Œå†·æš–è‰²è°ƒå¯¹æ¯”ï¼ˆæš–é»„å°ç¯vså†·è“æœˆå…‰ï¼‰ï¼Œç´§å¼ åŽ‹æŠ‘\n\n**é•œå¤´2**: ä¸­æ™¯ï¼Œè¿‡è‚©é•œå¤´ï¼Œä»ŽæŽæ¢…è‚©åŽçœ‹å‘å¼ å¼ºï¼ŒæŽæ¢…è‚©éƒ¨ä½œä¸ºå‰æ™¯è™šåŒ–å æ®ç”»é¢å·¦ä¾§ï¼Œå¼ å¼ºä½äºŽç”»é¢ä¸­å¤®ï¼Œè¡¨æƒ…é—ªèº²ï¼Œçœ¼ç¥žé£˜å¿½ä¸å®šï¼Œæ­£åœ¨è¯´è¯ï¼Œå°è¯ï¼š"è¿™ä¹ˆæ™šæ‰å›žæ¥ï¼Œåˆæ˜¯åŠ ç­ï¼Ÿ"ï¼Œå˜´å”‡å¾®å¯ï¼Œè¯­æ°”å†°å†·ï¼Œä¹¦æˆ¿ï¼Œå°ç¯ä¾§å…‰åœ¨å¼ å¼ºè„¸ä¸Šå½¢æˆä¸å®‰é˜´å½±ï¼Œä¸­ç­‰æ™¯æ·±ï¼Œå†·è‰²è°ƒï¼Œè´¨é—®åŽ‹è¿«\n\n**é•œå¤´3**: è¿‘æ™¯ï¼Œè¿‡è‚©é•œå¤´ï¼Œä»Žå¼ å¼ºè‚©åŽçœ‹å‘æŽæ¢…ï¼Œå¼ å¼ºè¥¿è£…è‚©éƒ¨ä½œä¸ºå‰æ™¯ï¼ŒæŽæ¢…ä½äºŽç”»é¢ä¸­å¤®ï¼Œçœ‰å¤´ç´§é”ï¼Œçœ¼ç¥žé”åˆ©ç›´è§†ï¼Œæ­£åœ¨å€¾å¬å¼ å¼ºçš„å›žç­”ï¼Œå¬åˆ°å°è¯ï¼š"å—¯...é¡¹ç›®èµ¶å·¥ï¼Œæ²¡åŠžæ³•ã€‚"ï¼Œå˜´è§’å¾®å¾®ä¸‹æ²‰ï¼Œçœ¼ç¥žä¸­é€éœ²ä¸ä¿¡ä»»ï¼Œä¹¦æˆ¿ï¼Œå°ç¯å…‰ä»Žä¾§é¢ç…§äº®æŽæ¢…åŠè¾¹è„¸åºžï¼Œæµ…æ™¯æ·±èƒŒæ™¯è™šåŒ–ï¼Œæš–é»„è½¬å†·çš„è‰²è°ƒï¼Œæ€€ç–‘å®¡è§†\n\n**é•œå¤´4**: ç‰¹å†™ï¼Œå¹³è§†ï¼Œä¸­å¿ƒæž„å›¾ï¼Œå¼ å¼ºé¢éƒ¨å æ®ç”»é¢ï¼Œå››åˆ†ä¹‹ä¸‰ä¾§é¢ï¼Œçœ¼ç¥žèº²é—ªå‘ä¸‹ï¼Œé¢å¤´æ¸—å‡ºç»†å¯†æ±—ç ï¼Œå–‰ç»“æ»šåŠ¨ï¼Œå¬åˆ°æŽæ¢…çš„è´¨é—®ï¼š"ä½ è¡¬è¡«ä¸Šçš„å£çº¢å°æ€Žä¹ˆè§£é‡Šï¼Ÿ"ï¼Œçž³å­”çž¬é—´æ”¾å¤§ï¼Œå˜´å”‡å¾®å¾®é¢¤æŠ–ï¼Œæ·±å¤œä¹¦æˆ¿èƒŒæ™¯è™šåŒ–ï¼Œä¾§å…‰å½¢æˆè„¸éƒ¨å¼ºçƒˆæ˜Žæš—å¯¹æ¯”ï¼Œæžæµ…æ™¯æ·±ï¼Œå†·è“è‰²è°ƒï¼Œææ…Œå¿ƒè™š\n\n**é•œå¤´5**: ç‰¹å†™ï¼Œå¾®ä¿¯æ‹ï¼Œå¼ å¼ºè¡¬è¡«é¢†å£ç‰¹å†™ï¼Œç™½è‰²è¡¬è¡«ä¸Šæ¸…æ™°å¯è§é²œè‰³çš„å£çº¢å°è®°ï¼Œå‘¨å›´å¸ƒæ–™å¾®å¾®çš±è¤¶ï¼Œå°ç¯å…‰ç›´å°„å½¢æˆå¼ºçƒˆå¯¹æ¯”ï¼Œæžæµ…æ™¯æ·±ï¼Œå†·ç™½è‰²è°ƒä¸­å£çº¢å°å‘ˆçŽ°åˆºçœ¼çº¢è‰²ï¼Œè¯æ®ç¡®å‡¿\n\n**é•œå¤´6**: è¿‘æ™¯ï¼Œå¹³è§†ï¼Œä¸­å¿ƒæž„å›¾ï¼ŒæŽæ¢…é¢éƒ¨å æ®ç”»é¢ï¼Œæ­£é¢ç›´è§†é•œå¤´ï¼Œçœ¼çœ¶æ³›çº¢ï¼Œçœ¼ç¥žä»Žæ„¤æ€’è½¬ä¸ºå¤±æœ›ï¼Œå˜´è§’ç´§æŠ¿ï¼Œä¸‹å·´å¾®å¾®é¢¤æŠ–ï¼Œæ·±å¤œä¹¦æˆ¿ï¼Œå°ç¯å…‰ä»Žä¸‹æ–¹æ˜ ç…§ï¼Œåœ¨çœ¼çœ¶å¤„å½¢æˆæ³ªå…‰åå°„ï¼Œæµ…æ™¯æ·±ï¼Œå†·è“è‰²è°ƒï¼Œå¿ƒç¢Žç»æœ›\n\n---\n\n## ðŸ› ï¸ å¯ç”¨å·¥å…·\n\n| å·¥å…· | ç”¨é€” | è°ƒç”¨æ—¶æœº |\n|------|------|----------|\n| **getAssets** | èŽ·å–è§’è‰²/é“å…·/åœºæ™¯èµ„äº§åˆ—è¡¨ | âš ï¸ å¿…é¡»é¦–å…ˆè°ƒç”¨ |\n| **getScript** | èŽ·å–å®Œæ•´å‰§æœ¬å†…å®¹ | âš ï¸ å¿…é¡»è°ƒç”¨ |\n| **getSegments** | èŽ·å–å½“å‰ç‰‡æ®µæ•°æ® | ç”Ÿæˆåˆ†é•œå‰è°ƒç”¨ |\n| **addShots** | æ·»åŠ æ–°åˆ†é•œï¼ˆé¦–æ¬¡ç”Ÿæˆï¼‰ | å®Œæˆæç¤ºè¯åŽ |\n| **updateShots** | æ›´æ–°å·²æœ‰åˆ†é•œï¼ˆä¿®æ”¹ï¼‰ | ä¿®æ”¹çŽ°æœ‰åˆ†é•œæ—¶ |\n| **deleteShots** | åˆ é™¤åˆ†é•œ | éœ€è¦åˆ é™¤æ—¶ |\n\n---\n\n## âœ… è¾“å‡ºè¦æ±‚\n\n1. **å·¥å…·è°ƒç”¨è§„åˆ™**ï¼š\n   - é¦–æ¬¡ç”Ÿæˆ â†’ `addShots`\n   - ä¿®æ”¹å·²æœ‰åˆ†é•œ â†’ `updateShots`\n\n2. **é•œå¤´æ•°é‡**ï¼š\n   - é»˜è®¤ 4 ä¸ª/ç‰‡æ®µ\n   - ä»¥ç”¨æˆ·æŒ‡å®šä¸ºå‡†\n   - å¯¹è¯åœºæ™¯æ ¹æ®å°è¯é‡çµæ´»è°ƒæ•´\n\n3. **è¯­è¨€è¦æ±‚**ï¼š\n   - æç¤ºè¯ä½¿ç”¨**ä¸­æ–‡**\n   - ä¸“ä¸šæœ¯è¯­å‡†ç¡®\n   - å°è¯**é€å­—å¼•ç”¨**å‰§æœ¬åŽŸæ–‡\n\n4. **å›žå¤é£Žæ ¼**ï¼š\n   - ç®€æ´ä¸“ä¸š\n   - é€‚å½“ä½¿ç”¨ emoji å¢žå¼ºå¯è¯»æ€§ ðŸŽ¬ðŸ“¸âœ¨\n   - å…³é”®ä¿¡æ¯**åŠ ç²—**æˆ–æ ‡æ³¨ âš ï¸'
    })
    .where("code", "storyboard-shot");  
  const videoText = await knex("t_prompts").where("code", "video-text").first();
  if (!videoText) {
    await knex("t_prompts").insert({
      id: 22,
      code: "video-text",
      name: "è§†é¢‘æç¤ºè¯-æ–‡æœ¬æ¨¡å¼",
      type: "system",
      parentCode: null,
      defaultValue:
        "# æ–‡æœ¬æ¨¡å¼è¯´æ˜Ž\n\n## è¾“å…¥ç‰¹ç‚¹\nçº¯æ–‡å­—æè¿°çš„é•œå¤´å†…å®¹ï¼Œæ— å‚è€ƒå›¾åƒ\n\n## æ ¸å¿ƒåŽŸåˆ™\n**ä¸¥æ ¼éµå®ˆç”¨æˆ·æŒ‡å®šçš„é•œå¤´æ—¶é•¿**ï¼Œé¿å…è¿‡åº¦æŽ¨æ¼”\n\n## åˆ†æžè¦æ±‚\n\n### 1. æ—¶é•¿ä¼˜å…ˆç­–ç•¥\n- **æ€»æ—¶é•¿é”šå®š**ï¼šä»¥ç”¨æˆ·ç»™å®šæ—¶é•¿ä¸ºç»å¯¹çº¦æŸ\n- **åŠ¨ä½œç²¾ç®€**ï¼šåªä¿ç•™å¿…è¦çš„æ ¸å¿ƒåŠ¨ä½œ\n- **èŠ‚å¥è®¡ç®—**ï¼šæ ¹æ®æ—¶é•¿åæŽ¨åˆç†çš„åŠ¨ä½œé€Ÿåº¦\n- **è£å‰ªæ€ç»´**ï¼šä¼˜å…ˆæˆªå–æœ€ç²¾åŽçš„ç‰‡æ®µï¼Œè€Œéžå®Œæ•´è¿‡ç¨‹\n\n### 2. åœºæ™¯æž„å»ºï¼ˆç²¾ç®€ç‰ˆï¼‰\n- **æœ€å°çŽ¯å¢ƒ**ï¼šä»…æè¿°å¿…è¦çš„ç©ºé—´ä¿¡æ¯\n- **æ ¸å¿ƒä¸»ä½“**ï¼šèšç„¦ä¸»è¦è§†è§‰å…ƒç´ \n- **ç®€åŒ–ç»†èŠ‚**ï¼šé¿å…å †ç Œæ— å…³èƒŒæ™¯\n\n### 3. åŠ¨æ€è§„åˆ’ï¼ˆæ—¶é•¿å¯¼å‘ï¼‰\n```\næ—¶é•¿åˆ¤æ–­é€»è¾‘ï¼š\nâ”œâ”€ â‰¤ 1s   â†’ å•ä¸€åŠ¨ä½œ/çŠ¶æ€ï¼Œæ— å¤æ‚è¿‡æ¸¡\nâ”œâ”€ 1-3s   â†’ 2-3ä¸ªå…³é”®çŠ¶æ€ï¼Œå¿«é€Ÿè¡”æŽ¥\nâ”œâ”€ 3-5s   â†’ å®Œæ•´åŠ¨ä½œåºåˆ—ï¼Œè‡ªç„¶èŠ‚å¥\nâ””â”€ > 5s   â†’ å¯åŠ å…¥æ¬¡è¦åŠ¨ä½œæˆ–çŽ¯å¢ƒå˜åŒ–\n```\n\n### 4. Visual ç»“æž„ï¼ˆç´§å‡‘ç‰ˆï¼‰\n```\nVisual:\nâ”œâ”€ ä¸»ä½“åŠ¨ä½œ (æ ¸å¿ƒå†…å®¹ï¼Œå¿…é¡»é¡¹)\nâ”œâ”€ çŽ¯å¢ƒæ°›å›´ (1-2å¥è¯æ¦‚æ‹¬)\nâ””â”€ é•œå¤´è¯­è¨€ (æ™¯åˆ«+è¿åŠ¨æ–¹å¼)\n```\n\n### 5. Keyframes æŽ§åˆ¶\n- **æ•°é‡é™åˆ¶**ï¼š\n  - â‰¤2s: æœ€å¤š3ä¸ªå…³é”®å¸§\n  - 2-4s: æœ€å¤š5ä¸ªå…³é”®å¸§\n  - >4s: æœ€å¤š7ä¸ªå…³é”®å¸§\n- **æ—¶é—´ç²¾ç¡®**ï¼šä¸¥æ ¼æŒ‰æ¯”ä¾‹åˆ†é…åˆ°æ€»æ—¶é•¿å†…\n\n### 6. æŽ¨æ¼”è¾¹ç•Œ\nâŒ **ç¦æ­¢æŽ¨æ¼”**ï¼š\n- å®Œæ•´çš„åŠ¨ä½œèµ·å§‹å’Œç»“æŸï¼ˆé™¤éžæ—¶é•¿å……è¶³ï¼‰\n- å¤æ‚çš„çŽ¯å¢ƒå˜åŒ–\n- å¤šå±‚æ¬¡çš„æƒ…ç»ªé€’è¿›\n\nâœ… **å…è®¸æŽ¨æ¼”**ï¼š\n- åŸºç¡€çš„ç‰©ç†æƒ¯æ€§ï¼ˆå¦‚æŒ¥æ‰‹åŽçš„æ‰‹è‡‚å›žè½ï¼‰\n- å¿…è¦çš„å…¥é•œ/å‡ºé•œçŠ¶æ€\n- ç¬¦åˆæ—¶é•¿çš„æ°›å›´ç»†èŠ‚\n\n---\n\n## æ—¶é•¿æ£€æŸ¥æ¸…å•\n\n**è¾“å‡ºå‰å¿…é¡»éªŒè¯**ï¼š\n1. âœ“ Keyframes æœ€åŽä¸€å¸§æ—¶é—´ â‰¤ æ€»æ—¶é•¿\n2. âœ“ åŠ¨ä½œèŠ‚å¥ç¬¦åˆç‰©ç†å¯èƒ½æ€§ï¼ˆä¸è¿‡å¿«/è¿‡æ…¢ï¼‰\n3. âœ“ æŽ¨æ¼”å†…å®¹å¯åœ¨æ—¶é•¿å†…å®Œæˆ\n4. âœ“ è‹¥æ—¶é•¿ä¸è¶³ï¼Œä¼˜å…ˆä¿ç•™æ ¸å¿ƒåŠ¨ä½œï¼Œåˆ å‡è¿‡æ¸¡\n\n---\n\n## ç¤ºä¾‹å¯¹æ¯”\n\n**è¾“å…¥æ–‡æœ¬**ï¼šä¸€ä¸ªäººåœ¨é›¨ä¸­å¥”è·‘  \n**ç”¨æˆ·æ—¶é•¿**ï¼š2ç§’\n\n### âŒ é”™è¯¯ç¤ºèŒƒï¼ˆè¶…æ—¶é•¿ï¼‰\n```\nKeyframes:\n- 0.0s: è¿œæ™¯å‡ºçŽ°\n- 0.5s: åŠ é€Ÿ\n- 1.0s: è·¨è¿‡æ°´å‘\n- 1.5s: å†²å‘é•œå¤´\n- 2.0s: ç”©åŠ¨å¤´å‘\n- 2.5s: å‡ºç”»é¢  â† è¶…å‡ºæ—¶é•¿ï¼\n```\n\n### âœ… æ­£ç¡®ç¤ºèŒƒ\n```\nVisual:\n- ä¸­æ™¯ï¼Œé›¨å¤œè¡—é“ï¼Œè·¯ç¯æ˜é»„ [æŽ¨æ¼”]\n- ç”·æ€§å¿«é€Ÿå¥”è·‘ï¼Œå†²å‘å¹¶æŽ è¿‡é•œå¤´\n- å›ºå®šæœºä½ï¼Œç„¦ç‚¹è·Ÿéš\n\nKeyframes:\n- 0.0s: äººç‰©åœ¨ä¸­æ™¯ä½ç½®èµ·æ­¥\n- 0.8s: åŠ é€Ÿè‡³è¿‘æ™¯\n- 1.5s: æŽ è¿‡é•œå¤´\n- 2.0s: [æŽ¨æ¼”] å‡ºç”»é¢å³ä¾§\n\nTransition:\n- In: [æŽ¨æ¼”] å·²åœ¨å¥”è·‘çŠ¶æ€\n- Out: [æŽ¨æ¼”] å†²å‡ºç”»é¢\n```\n\n---\n\n**ç›´æŽ¥è¾“å‡ºåˆ†é•œå†…å®¹**",
      customValue: null,
    });
  }
  const aiModels = [
    { name: "åˆ†é•œAgent", key: "storyboardAgent" },
    { name: "åˆ†é•œAgentå›¾ç‰‡ç”Ÿæˆ", key: "storyboardImage" },
    { name: "å¤§çº²æ•…äº‹çº¿Agent", key: "outlineScriptAgent" },
    { name: "èµ„äº§æç¤ºè¯æ¶¦è‰²", key: "assetsPrompt" },
    { name: "èµ„äº§å›¾ç‰‡ç”Ÿæˆ", key: "assetsImage" },
    { name: "å‰§æœ¬ç”Ÿæˆ", key: "generateScript" },
    { name: "è§†é¢‘æç¤ºè¯ç”Ÿæˆ", key: "videoPrompt" },
    { name: "å›¾ç‰‡ç¼–è¾‘", key: "editImage" },
  ];
  const keys = aiModels.map((m) => m.key);
  const existItems = await knex("t_aiModelMap").whereIn("key", keys).select("key");
  const existKeys = new Set(existItems.map((i) => i.key));
  const needInsert = aiModels
    .filter((m) => !existKeys.has(m.key))
    .map((m) => ({
      configId: null,
      name: m.name,
      key: m.key,
    }));
  if (needInsert.length) {
    await knex("t_aiModelMap").insert(needInsert);
  }
};
